document.addEventListener('DOMContentLoaded', (event) => {
  var isModalOpen = false; // Variable de estado para rastrear la visibilidad del modal

  var images = document.querySelectorAll('.myImg');
  var modals = document.querySelectorAll('.myModal');
  var grid = document.querySelectorAll('grid-container');
  var modalImages = document.querySelectorAll('.modal-img');
  var closeButtons = document.querySelectorAll('.close');


  
  // Función para abrir el modal y mostrar la imagen correcta
  function openModal(modal, imageSrc) {
    if (!isModalOpen) {
      var modalImg = modal.querySelector('.modal-img');
      modalImg.src = imageSrc; // Establece el atributo src de la imagen del modal
      modal.style.display = 'block';
      isModalOpen = true;
    }
  }

  // Función para cerrar el modal
  function closeModal(modal) {
    modal.style.display = 'none';
    isModalOpen = false;
  }

  // Eventos de clic para abrir los modales
  images.forEach(function(image, index) {
    image.addEventListener('click', function() {
      if (!isModalOpen) {
        var modal = modals[index];
        openModal(modal, image.src); // Pasa el src de la imagen al modal
      }
    });
  });

  // Cierre de modals con X
  closeButtons.forEach(function(button, index) {
    button.addEventListener('click', function() {
      var modal = modals[index];
      closeModal(modal);
    });
  });

  /*window.addEventListener('click', function(event) {
    modals.forEach(function(modal) {
      var modalContent = modal.querySelector('.modal'); // Selecciona el contenido dentro del modal
      // Comprueba si el clic fue fuera del contenido del modal pero dentro del rectángulo del modal
      if (event.target === modal && !modalContent.contains(event.target)) {
        closeModal(modal);
      }
    });
  });
  
  */
  
  
});



//////////////      DDL      ///////////////
document.addEventListener('DOMContentLoaded', function() {
  // Selecciona todos los botones y menús desplegables
  var dropdownMenuButtons = document.querySelectorAll('.dropdownMenuButton');
  var dropdownMenus = document.querySelectorAll('.dropdownMenu');

  // Asigna eventos a todos los botones
  dropdownMenuButtons.forEach(function(button, index) {
    button.addEventListener('click', function(event) {
      event.stopPropagation();
      // Cierra todos los menús antes de abrir el seleccionado
      dropdownMenus.forEach(function(menu) {
        menu.classList.remove('show');
      });
      // Abre el menú correspondiente al botón clickeado
      dropdownMenus[index].classList.toggle('show');
    });
  });

  // Cierra el menú desplegable si el usuario hace clic fuera de él
  window.addEventListener('click', function() {
    dropdownMenus.forEach(function(menu) {
      menu.classList.remove('show');
    });
  });

  // Actualiza el elemento seleccionado y cierra el menú
  dropdownMenus.forEach(function(menu) {
    menu.querySelectorAll('li').forEach(function(item) {
      item.addEventListener('click', function() {
        // Encuentra el botón correspondiente y actualiza su contenido
        var button = dropdownMenuButtons[Array.prototype.indexOf.call(dropdownMenus, menu)];
        button.querySelector('.selected').textContent = this.textContent;
        menu.classList.remove('show');
      });
    });
  });
});
